<html>
<! Copyright (c) Realtek Semiconductor Corp., 2003. All Rights Reserved. ->
<head>
<meta http-equiv="Content-Type" content="text/html" charset="utf-8">
<% getIndex("no-cache"); %>
<title>P201</title>
<script type="text/javascript" src="util_gw.js"> </script>
<SCRIPT language=Javascript src="<% getInfo("lang");%>"></SCRIPT>
<% getInfo("include_css"); %>
<script>
var lan_ip = "<% getInfo("ip-rom"); %>";
var lan_mask = "<% getInfo("mask-rom"); %>";
var staticLeaseNum = <% getIndex("DHCP_RSVD_IP_NUM"); %>;
isSupportDhcpPortAndIpBind = <% getInfo("isSupportDhcpPortAndIpBind"); %>;

function addClick()
{
	if (get_by_id("static_dhcp_onoff").value == "1") {
		if (get_by_id("ip_addr").value == "" && get_by_id("mac_addr").value == "")
			return false;

		if (staticLeaseNum >= 20)	 {
			alert(tcpip_entry_table_full);
			return false;
		}

		var str = document.formStaticDHCPAdd.mac_addr.value;
		if (checkIpAddr(document.formStaticDHCPAdd.ip_addr, tcpip_dhcp_alert1) == false)
			return false;

		if (lan_ip == document.formStaticDHCPAdd.ip_addr.value) {
			alert(tcpip_dhcp_alert3);
			document.formStaticDHCPAdd.ip_addr.focus();
			return false;
		} else if(isSupportDhcpPortAndIpBind == 0 && str.length < 12) {
			alert(tcpip_dhcp_alert4);
			document.formStaticDHCPAdd.mac_addr.focus();
			return false;
		}

		if (!checkSubnet(lan_ip, lan_mask, document.formStaticDHCPAdd.ip_addr.value)) {
			alert(tcpip_entry_ip_error);
			document.formStaticDHCPAdd.ip_addr.focus();
			return false;
		}

		with (document.formStaticDHCPAdd) {
			if (!checkMacAddr(mac_addr,tcpip_dhcp_alert5))
				return false;
		}
	}
	return true;
}

function deleteClick()
{
	acl_num = <% getIndex("wlanAcNum"); %>;
	delNum = 0 ;
	for (i = 1; i <= acl_num ; i++) {
		if (document.formStaticDHCP.elements["select"+i].checked)
			delNum ++ ;
	}
	if (!confirm(tcpip_dhcp_del_select) ) {
		return false;
	} else
		return true;
}

function deleteAllClick()
{
	if (!confirm(tcpip_dhcp_del_all) ) {
		return false;
	} else
		return true;
}

function disableDelButton()
{
	disableButton(document.formStaticDHCP.deleteSelRsvIP);
	disableButton(document.formStaticDHCP.deleteAllRsvIP);
}

function enableAc()
{
	enableTextField(document.formStaticDHCPAdd.mac_addr);
	enableTextField(document.formStaticDHCPAdd.hostname);
}

function disableAc()
{
	disableTextField(document.formStaticDHCPAdd.mac_addr);
	disableTextField(document.formStaticDHCPAdd.hostname);
}

function static_dhcp_tbl_onoff_disabled(value)
{
	var is_disable;

	if (value == 1)
		is_disable = false;
	else
		is_disable = true;

	get_by_id("ip_addr").disabled = is_disable;
	get_by_id("mac_addr").disabled = is_disable;
	get_by_id("hostname").disabled = is_disable;
	get_by_id("deleteSelRsvIP").disabled = is_disable;
	get_by_id("deleteAllRsvIP").disabled = is_disable;
	get_by_id("showScan").disabled = is_disable;

}

function static_dhcp_onoff_select(value)
{
	if (value == 1) {
		get_by_id("static_dhcp").value = 1;
		get_by_id("static_dhcp_onoff").selectedIndex = 1;
	} else {
		get_by_id("static_dhcp").value = 0;
		get_by_id("static_dhcp_onoff").selectedIndex = 0;
	}

	static_dhcp_tbl_onoff_disabled(get_by_id("static_dhcp").value);
}

function init()
{
	static_dhcp_onoff_select(get_by_id("static_dhcp").value);
}

function macTblClick(url) {
	openWindow(url, 'P201', 600, 400);
}
</script>
</head>
<body onload="init();">
<blockquote>
<h2><script>dw(tcpip_dhcp_header)</script></h2>
<table border=0 width="550" cellspacing="1" cellpadding=0>
<tr><font size=2><script>dw(tcpip_dhcp_explain)</script></font></tr>
<tr><hr size=1 noshade align=top></tr>
</table>
<form action=/boafrm/formStaticDHCP method=POST name="formStaticDHCPAdd">
<input type='hidden' id='static_dhcp' name='static_dhcp' value='<% getInfo("static_dhcp_onoff"); %>'>
<table width="550" border="0" cellpadding="1" cellspacing="0">
	<tr>
		<td width="40%"><font size=2><b><script>dw(tcpip_dhcp_static_onoff)</script></b></font></td>
		<td width="60%">
			<select id="static_dhcp_onoff" name="static_dhcp_onoff" onChange="static_dhcp_onoff_select(document.formStaticDHCPAdd.static_dhcp_onoff.value)">
 				<option value="0"><script>dw(tcpip_dhcp_static_off)</script></option>
				<option value="1"><script>dw(tcpip_dhcp_static_on)</script></option>
			</select>
		</td>
	</tr>
	<br>
	<tr>
		<td width="40%"><font size=2><b><script>dw(tcpip_dhcp_ipaddr)</script></b></font></td>
		<td width="60%">
			<input type="text" id="ip_addr" name="ip_addr" size="17" maxlength="15" value="">
		</td>
	</tr>
	<tr>
		<td width="40%"><font size=2><b><script>dw(tcpip_dhcp_mac_addr2)</script></b></font></td>
		<td width="60%">
			<input type="text" id="mac_addr" name="mac_addr" size="17" maxlength="12" value="">&nbsp;
			<input type="button" id="showScan" value="showScan" name="showScan" onClick="macTblClick('/mactbl.htm')" >
			<script>document.formStaticDHCPAdd.showScan.value = tcpip_dhcp_static_scan;</script>
		</td>
	</tr>
	<tr>
		<td width="40%"><font size=2><b><script>dw(tcpip_dhcp_comment)</script></b></font></td>
		<td width="60%">
			<input type="text" id="hostname" name="hostname" size="17" maxlength="15" value="">
		</td>
	</tr>
</table>
<p>
	<input type="submit" value="Save" id="addRsvIP" name="save_apply" onClick="return addClick()">
	<script>document.formStaticDHCPAdd.save_apply.value = tcpip_dhcp_save_apply;</script>
	<input type="hidden" value="1" name="addRsvIPFlag">
	<input type="hidden" value="/tcpip_staticdhcp.htm" name="submit-url">
</p>
</form>

<br>
<form action=/boafrm/formStaticDHCP method=POST name="formStaticDHCP">
<table border="0" width=640>
	<tr><font size=2><b><script>dw(tcpip_dhcp_list)</script></b></font></tr>
	<% dhcpRsvdIp_List();%>
</table>
<br>
	<input type="submit" value="Delete Selected" id="deleteSelRsvIP" name="deleteSelRsvIP" onClick="return deleteClick()">&nbsp;&nbsp;
	<script>document.formStaticDHCP.deleteSelRsvIP.value = tcpip_dhcp_delsel;</script>
	<input type="submit" value="Delete All" id="deleteAllRsvIP" name="deleteAllRsvIP" onClick="return deleteAllClick()">
	<script>document.formStaticDHCP.deleteAllRsvIP.value = tcpip_dhcp_delall;</script>
</form>
</blockquote>
</body>
</html>
