<html>
<! Copyright (c) Realtek Semiconductor Corp., 2003~2005. All Rights Reserved. ->
<head>
<meta http-equiv="Content-Type" content="text/html" charset="utf-8">
<% getIndex("no-cache"); %>
<title>System Command</title>
<script type="text/javascript" src="skb_util_gw.js"> </script>
<script type="text/javascript" src="skb_xml_data.js"></script>
<% getInfo("include_css"); %>
<script>
var isMeshDefined = <% getIndex("isMeshDefined"); %>
var str='';
var arrlog= Array();
var httpRequest = null;

function saveClick()
{
	/*if ( document.formSysLog.rtLogEnabled.checked && checkIpAddr(document.formSysLog.logServer, '로그 서버 IP 주소가 올바르지 않습니다. ') == false )
		return false;*/

	if ( document.formSysLog.rtLogEnabled.checked == true) {
		if (document.formSysLog.logServer.value == "") {
			alert("로그 서버 IP 주소가 올바르지 않습니다");
			return false;
		}
	}

	if (document.formSysLog.logServer.value == "********************") {
		document.formSysLog.msg.value="";
		return true;
	}

	var strArry = document.formSysLog.logServer.value.split(":");
	var rlog_ip = strArry[0];
	var rlog_port = parseInt(strArry[1]);

	if (rlog_port == 0 || isNaN(rlog_port))
		rlog_port = 10614;

	if (rlog_port <= 0 || rlog_port > 65535) {
		alert("로그 서버 IP 포트가 올바르지 않습니다");
		return false;
	}

	document.formSysLog.rlog_addr.value = rlog_ip + ":" + rlog_port;
	document.formSysLog.msg.value="";
	return true;
}

function updateState()
{
	if(document.formSysLog.logEnabled.checked) {
		enableTextField(document.formSysLog.rtLogEnabled);
		enableTextField(document.formSysLog.syslogEnabled);
		updateStateRemote();
	} else {
		disableTextField(document.formSysLog.logServer);
		disableTextField(document.formSysLog.rtLogEnabled);
		disableTextField(document.formSysLog.syslogEnabled);
	}
}

function updateStateRemote()
{
	if(document.formSysLog.rtLogEnabled.checked) {
		enableTextField(document.formSysLog.logServer);
	} else
		disableTextField(document.formSysLog.logServer);

}

function scrollElementToEnd ()
{
	var div = document.getElementById("display");
	if (div.scrollHeight > 0)
		div.scrollTop = div.scrollHeight;
}

function init()
{
	var cf = document.formSysLog;
	var logEnabled = <%getIndex("logEnabled");%>;
	var rtLogEnabled = <%getIndex("rtLogEnabled");%>;

	if(logEnabled & 1)
		cf.logEnabled.checked = 1;
	else
		cf.logEnabled.checked = 0;

	if((logEnabled>>1) & 1)
		cf.syslogEnabled.checked = 1;
	else
		cf.syslogEnabled.checked = 0;

	if(rtLogEnabled)
		cf.rtLogEnabled.checked = 1;
	else
		cf.rtLogEnabled.checked = 0;

	updateState();
}

function clear_log_buffer()
{
	document.formSysLog.msg.value="";
}

function text_clear()
{
	document.formSysLog.logServer.value = "";
}

</script>
</head>
<blockquote>
<h2>시스템 로그</h2>

<body onload="init();">
  <table border=0 width="700" cellspacing=0 cellpadding=0>
  <tr><font size=2>
	시스템 Log를 보여주는 페이지입니다.
  </tr>
  <tr><hr size=1 noshade align=top></tr>
  <form action=/boafrm/formSysLog method=POST name="formSysLog">
  <input type="hidden" name="rlog_addr" value="">
  <tr><td width="200" ><font size=2><b><input type="checkbox" name="logEnabled" value="ON" onClick="updateState()">&nbsp;&nbsp;Log 사용하기</b></font>
  </td></tr><br>

  <table border="0" width=700>
  <tr><td width="25%">&nbsp;&nbsp;&nbsp;&nbsp;<input type="hidden" name="syslogEnabled" value="ON"> </td>
         </table>
  <table border="0" width=700>
  <tr><td width="30%">&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" name="rtLogEnabled" value="ON" onClick="updateStateRemote()"> <font size=2><b>원격 로그 사용하기</b></font><br></td>
   	<td width="70%"><b><font size=2>로그 서버 IP 주소:</b>&nbsp;&nbsp;
	<input type="text" name="logServer" value="********************" onClick="text_clear();" size="30" maxlength="30"></td>
  </tr>
  </table>
   <tr><td height=10> </td> </tr>
   <tr><td colspan=2><p><input type="submit" value="적용" name="Apply" onClick="return saveClick()" >&nbsp;&nbsp; </td></tr>

  <p>
  <input type="hidden" value="/skb_syslog.htm" name="submit-url">
	<div id="display" style="width:700px; height:600px; overflow:auto">
  <table name="msg" border="1" rules="none" width="1000" cellpadding="0" cellspacing="1"  bgcolor="white">
  	<% sysLogList(); %>
  </table>
	</div>
  <script>
   scrollElementToEnd();
  </script>
  <p>
  <input type="button" value="새로 고침" name="refresh" onClick="javascript: window.location.reload()">
  &nbsp;&nbsp; <input type="submit" value="로그 저장 " name="save" >
</form>
</table>
</body>
</blockquote>
</html>


