<html>
<! Copyright (c) Realtek Semiconductor Corp., 2003. All Rights Reserved. ->
<head>
<meta http-equiv="Content-Type" content="text/html" charset="utf-8">
<title>펌웨어 업그레이드</title>
<style>
.on {display:on}
.off {display:none}
</style>
<script type="text/javascript" src="util_gw.js"></script>
<% getInfo("include_css"); %>
<script>
var MWJ_progBar = 0;
var time=0;
var delay_time=1000;
var loop_num=0;
//var auto_up_flag = <% getInfo("auto_upgrade_info"); %>;
var auto_up_flag=0;
var nowCount=0;

function show_auto_upgrade()
{
	if(nowCount %2)
		auto_upgrade_info.style.color = "white";
	else
		auto_upgrade_info.style.color = "red";

	if(nowCount < 1000){
		nowCount++;
		setTimeout('show_auto_upgrade()', 500);
	}
}

function progress()
{
  if (loop_num == 12) {
	alert("펌웨어 업그레이드가 실패하였습니다!");
	return false;
  }
  if (time < 1)
	time = time + 0.20;
  else {
	time = 0;
	loop_num++;
  }
  setTimeout('progress()',delay_time);
  myProgBar.setBar(time);
}

function sendClicked(F)
{
  F.send.disabled=true;
  F.reset.disabled=true;
  if(document.upload.binary.value == ""){
      	document.upload.binary.focus();
  	alert('파일명이 비어있습니다!');
  	F.send.disabled=false;
  	F.reset.disabled=false;
  	return false;
  }
  F.submit();
  show_div(true, "progress_div");
  progress();
}

function ftpSendClicked(ftp_form)
{
	document.ftpUpload.ftp_server.value = trim(document.ftpUpload.ftp_server.value);
	document.ftpUpload.ftp_file.value = trim(document.ftpUpload.ftp_file.value);
	document.ftpUpload.ftp_id.value = trim(document.ftpUpload.ftp_id.value);

	var addr_val = document.ftpUpload.ftp_server.value;
	var filepath_val = document.ftpUpload.ftp_file.value;
	var id_val = document.ftpUpload.ftp_id.value;

    if(document.ftpUpload.ftp_server.value == ""){
        document.ftpUpload.ftp_server.focus();
        alert('서버 주소가 비어있습니다!');

        return false;
    }
    if ( IsHtmlComment(addr_val)) {
		alert('Html 주석문을 입력할 수 없습니다.!');
		document.ftpUpload.ftp_server.value = document.ftpUpload.ftp_server.defaultValue;
		document.ftpUpload.ftp_server.focus();

		return false;
  	}
    if(document.ftpUpload.ftp_file.value == ""){
        document.ftpUpload.ftp_file.focus();
        alert('파일명이 비어있습니다!');

        return false;
    }
	if ( IsHtmlComment(filepath_val)) {
		alert('Html 주석문을 입력할 수 없습니다.!');
		document.ftpUpload.ftp_file.value = document.ftpUpload.ftp_file.defaultValue;
		document.ftpUpload.ftp_file.focus();

		return false;
	}
    if(document.ftpUpload.ftp_id.value == ""){
        document.ftpUpload.ftp_id.focus();
        alert('아이디가 비어있습니다!');

        return false;
    }

	if ( IsHtmlComment(id_val)) {
		alert('Html 주석문을 입력할 수 없습니다.!');
		document.ftpUpload.ftp_id.value = document.ftpUpload.ftp_id.defaultValue;
		document.ftpUpload.ftp_id.focus();

		return false;
	}

    document.ftpUpload.ftp_server.value = trim(document.ftpUpload.ftp_server.value);
    document.ftpUpload.ftp_file.value = trim(document.ftpUpload.ftp_file.value);
    document.ftpUpload.ftp_id.value = trim(document.ftpUpload.ftp_id.value);
    document.ftpUpload.ftp_passwd.value = trim(document.ftpUpload.ftp_passwd.value);

    ftp_form.ftpSend.disabled=true;
    ftp_form.reset.disabled=true;
    ftp_form.submit();
    show_div(true, "progress_div");
    progress();
}

function frmOnload() {
	document.ftpUpload.ftp_server.value = "<% getInfo("ftp_server"); %>";
	document.ftpUpload.ftp_file.value = "<% getInfo("ftp_file"); %>";
	document.ftpUpload.ftp_id.value = "<% getInfo("ftp_id"); %>";
	document.ftpUpload.ftp_passwd.value = "<% getInfo("ftp_passwd"); %>";
}

</script>

</head>
<body onload="frmOnload(); mouse_r_click();">
<blockquote>

<h2>펌웨어 업그레이드</h2>
<table border=0 width="540" cellspacing=4 cellpadding=0>
<tr><td><font size=2>
 새로운 버전으로 펌웨어를 업그레이드 할 수 있습니다. 업그레이드중에는 장치의 전원을 끄지말고
 잠시 기다려 주시기 바랍니다. 시스템 고장의 원인이 될 수 있습니다.
</font></td></tr>
<tr><td><hr size=1 noshade align=top></td></tr>
</table>

<form method="post" action="boafrm/formUpload" enctype="multipart/form-data" name="upload">
<table border="0" cellspacing="4" width="500">
  <tr>
	<script>
		if( auto_up_flag == 1)
			document.write("<font size=3><b><span id=auto_upgrade_info style='color:red;'>펌웨어를 업그레이드 중이므로, 지금은 이용할 수 없습니다.<br>전원을 끄지말고 잠시 기다려 주시기 바랍니다.</span></b></font>");
	</script>
  </tr>
  <tr>
      <td width="20%"><font size=2><b>파일 선택:</b>&nbsp;&nbsp;&nbsp;&nbsp;</td>
      <td width="80%"><font size=2><input type="file" name="binary" size=20></td>
  </tr>
  </table>
    <p> <input onclick=sendClicked(this.form) type=button value="업로드" name="send">&nbsp;&nbsp;
	<input type="reset" value="취소" name="reset">
<!--
	<input type="hidden" value="0x10000" name="writeAddrWebPages">
	<input type="hidden" value="0x20000" name="writeAddrCode">
-->
	<input type="hidden" value="/upload.htm" name="submit-url">

    </p>
 </form>

 <form method="post" action="boafrm/formFtpUpload" name="ftpUpload">
<table border="0" cellspacing="4" width="600">
    <tr>
        <td width="30%"><font size=2><b>FTP 원격업그레이드</b>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>

    <tr>
	    <td><font size=2><b>서버주소</b></td>
	    <td><input type="text" name="ftp_server" maxlength="50" style="width:70%;" > </td>
	</tr>

	<tr>
	    <td><font size=2><b>(경로/)파일명</b></td>
	    <td><input type="text"  name="ftp_file" maxlength="50" style="width:70%;" > </td>
	</tr>

	<tr>
	    <td><font size=2><b>아이디</b></td>
	    <td><input type="text"  name="ftp_id" maxlength="50" style="width:70%;" ></td>
	</tr>

	<tr>
	    <td><font size=2><b>패스워드</b></td>
	    <td> <input type="password" name="ftp_passwd" maxlength="50" style="width:70%;" ></td>
	</tr>

  </table>
    <p> <input onclick=ftpSendClicked(this.form) type=button value="실행" name="ftpSend">&nbsp;&nbsp;
        <input type="reset" value="취소" name="reset">
    </p>
 </form>

 <tr>
	<script>
		if( auto_up_flag == 1)
			document.write("<font size=3><b><span id=auto_upgrade_info style='color:red;'>펌웨어를 업그레이드 중이므로, 지금은 이용할 수 없습니다.<br>전원을 끄지말고 잠시 기다려 주시기 바랍니다.</span></b></font>");
	</script>
  </tr>

 <script type="text/javascript" language="javascript1.2">
		var myProgBar = new progressBar(
			1,         //border thickness
			'#000000', //border colour
			'#ffffff', //background colour
			'#043db2', //bar colour
			300,       //width of bar (excluding border)
			15,        //height of bar (excluding border)
			1          //direction of progress: 1 = right, 2 = down, 3 = left, 4 = up
		);

		if( auto_up_flag == 1){
			document.upload.send.disabled = true;
			show_auto_upgrade();
		}
</script>


 </blockquote>
</body>
</html>
